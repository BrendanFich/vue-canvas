(function(t){function e(e){for(var i,s,c=e[0],h=e[1],l=e[2],u=0,d=[];u<c.length;u++)s=c[u],a[s]&&d.push(a[s][0]),a[s]=0;for(i in h)Object.prototype.hasOwnProperty.call(h,i)&&(t[i]=h[i]);r&&r(e);while(d.length)d.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,c=1;c<n.length;c++){var h=n[c];0!==a[h]&&(i=!1)}i&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var i={},a={app:0},o=[];function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=i,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/vue-canvas/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],h=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var r=h;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var i=n("64a9"),a=n.n(i);a.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var i=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Tools",{staticClass:"tools",on:{changeSize:t.changeSize,changeColor:t.changeColor,handleBack:t.back,handleClear:t.clear,handleSave:t.save,handleReplay:t.replay}}),n("canvas",{attrs:{id:"canvas"}})],1)},o=[],s=(n("4917"),n("ac6a"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"toolsbox"},[n("button",{staticClass:"showOrHideBtn",on:{click:t.showOrHideTools}},[n("i",{staticClass:"iconfont icon-gongjuxiang"})]),n("transition",{attrs:{name:"fade"}},[t.isShowTools?n("div",{staticClass:"tools"},[n("div",{staticClass:"tool"},[n("div",{staticClass:"toolName"},[t._v("大小:")]),n("el-slider",{staticClass:"toolBtn",attrs:{min:5,max:50},model:{value:t.lineWidth,callback:function(e){t.lineWidth=e},expression:"lineWidth"}})],1),n("div",{staticClass:"tool"},[n("div",{staticClass:"toolName"},[t._v("颜色:")]),n("el-color-picker",{staticClass:"toolBtn",attrs:{predefine:t.predefineColors},model:{value:t.color,callback:function(e){t.color=e},expression:"color"}})],1),n("div",{staticClass:"tool"},[n("div",{staticClass:"toolName"},[t._v("撤销:")]),n("button",{staticClass:"toolBtn",on:{click:t.handleBack}},[n("i",{staticClass:"iconfont icon-chexiao"})])]),n("div",{staticClass:"tool"},[n("div",{staticClass:"toolName"},[t._v("清除:")]),n("button",{staticClass:"toolBtn",on:{click:t.handleClear}},[n("i",{staticClass:"iconfont icon-clear"})])]),n("div",{staticClass:"tool"},[n("div",{staticClass:"toolName"},[t._v("保存:")]),n("button",{staticClass:"toolBtn",on:{click:t.handleSave}},[n("i",{staticClass:"iconfont icon-xiazai"})])]),n("div",{staticClass:"tool"},[n("div",{staticClass:"toolName"},[t._v("重播:")]),n("button",{staticClass:"toolBtn",on:{click:t.handleReplay}},[n("i",{staticClass:"iconfont icon-bofang"})])])]):t._e()])],1)}),c=[],h={name:"tools",data:function(){return{isShowTools:!0,lineWidth:10,color:"#666",predefineColors:["#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585"]}},methods:{showOrHideTools:function(){this.isShowTools=!this.isShowTools},handleBack:function(){this.$emit("handleBack")},handleClear:function(){this.$emit("handleClear")},handleSave:function(){this.$emit("handleSave")},handleReplay:function(){this.$emit("handleReplay")}},watch:{lineWidth:function(){this.$emit("changeSize",this.lineWidth)},color:function(){this.$emit("changeColor",this.color)}}},l=h,r=(n("82fa"),n("2877")),u=Object(r["a"])(l,s,c,!1,null,"564aeaeb",null),d=u.exports,f={name:"app",components:{Tools:d},data:function(){return{lineWidth:10,color:"#666",canvas:null,context:null,drawing:!1,myTimeStamp:void 0,minTimeDiff:8,minPointDistance:8,stack:[],path:[]}},mounted:function(){this.init()},methods:{changeSize:function(t){this.lineWidth=t},changeColor:function(t){this.color=t},init:function(){this.canvas=document.getElementById("canvas"),this.context=this.canvas.getContext("2d"),this.setCanvasSize(),this.context.lineCap="round",this.context.lineJoin="round",this.context.fillStyle="white",this.context.fillRect(0,0,this.canvas.width,this.canvas.height),window.onresize=this.setCanvasSize,this.canvas.addEventListener("mousedown",this.handleMousedown),this.canvas.addEventListener("touchstart",this.handleTouchstart)},setCanvasSize:function(){this.canvas.width=document.documentElement.clientWidth,this.canvas.height=document.documentElement.clientHeight},handleMousedown:function(t){this.drawing=!0,this.myTimeStamp=(new Date).getTime();var e=t.clientX,n=t.clientY;this.path.push({width:this.lineWidth,color:this.color}),this.path.push({x:e,y:n}),this.stack.push(this.path),this.drawLine(),this.canvas.addEventListener("mousemove",this.handleMousemove),this.canvas.addEventListener("mouseup",this.handleMouseup)},handleMousemove:function(t){if(!((new Date).getTime()-this.myTimeStamp<this.minTimeDiff)){var e=t.clientX,n=t.clientY,i=this.path[this.path.length-1].x,a=this.path[this.path.length-1].y;Math.abs(e-i)<this.minPointDistance&&Math.abs(n-a)<this.minPointDistance||(this.path.push({x:e,y:n}),this.stack.pop(),this.stack.push(this.path),this.drawLine(),this.myTimeStamp=(new Date).getTime())}},handleMouseup:function(){this.drawing=!1,this.path=[],this.canvas.removeEventListener("mousemove",this.handleMousemove),this.canvas.removeEventListener("mouseup",this.handleMouseup)},handleTouchstart:function(t){t.preventDefault(),this.drawing=!0,this.myTimeStamp=(new Date).getTime();var e=t.touches[0].clientX,n=t.touches[0].clientY;this.path.push({width:this.lineWidth,color:this.color}),this.path.push({x:e,y:n}),this.stack.push(this.path),this.drawLine(),this.canvas.addEventListener("touchmove",this.handleTouchmove),this.canvas.addEventListener("touchend",this.handleTouchend)},handleTouchmove:function(t){if(t.preventDefault(),!((new Date).getTime()-this.myTimeStamp<this.minTimeDiff)){var e=t.touches[0].clientX,n=t.touches[0].clientY,i=this.path[this.path.length-1].x,a=this.path[this.path.length-1].y;Math.abs(e-i)<this.minPointDistance&&Math.abs(n-a)<this.minPointDistance||(this.path.push({x:e,y:n}),this.stack.pop(),this.stack.push(this.path),this.drawLine(),this.myTimeStamp=(new Date).getTime())}},handleTouchend:function(t){t.preventDefault(),this.drawing=!1,this.path=[],document.removeEventListener("mousemove",this.handleTouchmove),document.removeEventListener("mouseup",this.handleTouchend)},drawLine:function(){var t=this;this.context.fillStyle="white",this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.stack.forEach(function(e){var n=e.length;e.forEach(function(e,i,a){if(0===i)t.context.lineWidth=e.width,t.context.strokeStyle=e.color;else if(1===i)t.context.beginPath(),t.context.moveTo(e.x,e.y),t.context.lineTo(e.x,e.y);else{var o=a[i-1].x,s=a[i-1].y,c=e.x,h=e.y,l=o/2+c/2,r=s/2+h/2;t.context.quadraticCurveTo(o,s,l,r)}i===n-1&&(t.context.lineTo(e.x,e.y),t.context.stroke())})})},back:function(){this.stack.splice(this.stack.length-1,1),this.path.length=0,this.drawLine()},clear:function(){this.path.length=0,this.stack.length=0,this.drawLine()},save:function(){var t=document.createElement("a");t.href=this.canvas.toDataURL("image/png");var e=window.navigator.userAgent.toLowerCase();e.match(/iphone|android|ipad/)?t.target="_blank":t.download="myCanvas",t.click(),document.body.removeChild(t)},replay:function(){var t=this,e=this.stack.reduce(function(t,e){return t.concat(e)}),n=e.length,i=2,a=function a(){if(t.context.fillStyle="white",t.context.fillRect(0,0,t.canvas.width,t.canvas.height),i<=n)for(var s=0;s<i;s++){var c=e[s];if(c.width)t.context.lineWidth=c.width,t.context.strokeStyle=c.color;else{if(e[s-1].width)t.context.beginPath(),t.context.moveTo(c.x,c.y),t.context.lineTo(c.x,c.y);else{var h=e[s-1].x,l=e[s-1].y,r=c.x,u=c.y,d=h/2+r/2,f=l/2+u/2;t.context.quadraticCurveTo(h,l,d,f)}(s===i-1||e[s+1].width)&&(t.context.lineTo(c.x,c.y),t.context.stroke())}}if(i+=1,!(i>n))return t.drawing?(cancelAnimationFrame(o),void t.drawLine()):void requestAnimationFrame(a);cancelAnimationFrame(o)},o=requestAnimationFrame(a)}}},v=f,m=(n("034f"),Object(r["a"])(v,a,o,!1,null,null,null)),p=m.exports,w=n("5c96"),g=n.n(w);n("0fae");i["default"].config.productionTip=!1,i["default"].use(g.a),new i["default"]({render:function(t){return t(p)}}).$mount("#app")},"64a9":function(t,e,n){},"82fa":function(t,e,n){"use strict";var i=n("f2a0"),a=n.n(i);a.a},f2a0:function(t,e,n){}});
//# sourceMappingURL=app.7a5435eb.js.map